<!--
title: Instalación entorno
description: 
published: true
date: 2024-01-24T11:45:11.559Z
tags: soc, install, docker
editor: ckeditor
dateCreated: 2024-01-24T11:45:11.559Z
-->

<h1 style="text-align:center;">Instalación entorno</h1>
<p>&nbsp;</p>
<h2>Montaje del disco</h2>
<p>Para evitar rellenar el disco raíz con datos de los contenedores se debe de montar un disco aparte del raíz.</p>
<p>Para ello añadir a la máquina un disco (en caso de ser virtual) o realizar una partición de al menos 20GB.</p>
<p>Revisar que el disco se ha atachado correctamente</p>
<pre><code class="language-plaintext">fdisk -l</code></pre>
<p>Crear el physical volume, sustituyendo X por la unidad correspondiente</p>
<pre><code class="language-plaintext">pvcreate /dev/sdX</code></pre>
<p>Creación del volume group</p>
<pre><code class="language-plaintext">vgcreate vg_docker /dev/sdX</code></pre>
<p>Y por último la creación del logical volume</p>
<pre><code class="language-plaintext">lvcreate -l 100%FREE -n lv_docker vg_docker</code></pre>
<p>Una vez creado el lv se debe de formatear el disco</p>
<pre><code class="language-plaintext">mkfs.xfs /dev/vg_docker/lv_docker</code></pre>
<p>Creación del punto de montaje</p>
<pre><code class="language-plaintext">mkdir /var/lib/docker</code></pre>
<p>y montamos el disco</p>
<pre><code class="language-plaintext">mount /dev/vg_docker/lv_docker /var/lib/docker</code></pre>
<p>Por último, y para garantizar que se monta en el arranque añadirlo al fstab</p>
<pre><code class="language-plaintext">echo “/dev/mapper/vg_docker-lv_docker /var/lib/docker xfs defaults 0 0” &gt;&gt; /etc/fstab</code></pre>
<p>&nbsp;</p>
<h2>Instalación de docker</h2>
<p>Completada esta parte se debe descargar y configurar el repositorio</p>
<pre><code class="language-plaintext">sudo dnf config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</code></pre>
<p>Y posteriormente instalamos el mismo</p>
<pre><code class="language-plaintext">sudo dnf install docker-ce</code></pre>
<p>Una vez instalado se habilitará y arrancará el servicio</p>
<pre><code class="language-plaintext">systemctl enable docker
systemctl start docker</code></pre>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
